/*!
 * MinDB (version 0.2.0) - Database on JavaScript
 * 
 * Will Wen Gunn(iwillwen) and other contributors
 * 
 * @license MIT-license
 * @copyright 2012-2018 iwillwen(willwengunn@gmail.com)
 */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("min",[],e):"object"==typeof exports?exports.min=e():t.min=e()}(window,function(){return function(r){var n={};function s(t){if(n[t])return n[t].exports;var e=n[t]={i:t,l:!1,exports:{}};return r[t].call(e.exports,e,e.exports,s),e.l=!0,e.exports}return s.m=r,s.c=n,s.d=function(t,e,r){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(r,n,function(t){return e[t]}.bind(null,n));return r},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=2)}([function(t,e,r){"use strict";var n,s=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),a=this&&this.__awaiter||function(i,o,u,a){return new(u||(u=Promise))(function(t,e){function r(t){try{s(a.next(t))}catch(t){e(t)}}function n(t){try{s(a.throw(t))}catch(t){e(t)}}function s(e){e.done?t(e.value):new u(function(t){t(e.value)}).then(r,n)}s((a=a.apply(i,o||[])).next())})},c=this&&this.__generator||function(r,n){var s,i,o,t,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(s)throw new TypeError("Generator is already executing.");for(;u;)try{if(s=1,i&&(o=2&e[0]?i.return:e[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,e[1])).done)return o;switch(i=0,o&&(e=[2&e[0],o.value]),e[0]){case 0:case 1:o=e;break;case 4:return u.label++,{value:e[1],done:!1};case 5:u.label++,i=e[1],e=[0];continue;case 7:e=u.ops.pop(),u.trys.pop();continue;default:if(!(o=0<(o=u.trys).length&&o[o.length-1])&&(6===e[0]||2===e[0])){u=0;continue}if(3===e[0]&&(!o||e[1]>o[0]&&e[1]<o[3])){u.label=e[1];break}if(6===e[0]&&u.label<o[1]){u.label=o[1],o=e;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(e);break}o[2]&&u.ops.pop(),u.trys.pop();continue}e=n.call(r,u)}catch(t){e=[6,t],i=0}finally{s=o=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};Object.defineProperty(e,"__esModule",{value:!0});var i,o,u=r(3),h=r(1);(o=i=e.TYPES||(e.TYPES={}))[o.mix=0]="mix",o[o.hash=1]="hash",o[o.list=2]="list",o[o.set=3]="set",o[o.zset=4]="zset";var f=function(r){function t(t){void 0===t&&(t="mindb");var e=r.call(this)||this;return e._keys={},e.name=t,e.store=u.createInstance({name:t}),e._restoreKeys(),e}return s(t,r),t.prototype._setType=function(e,r){return a(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return this._keys[e]=r,[4,this.store.setItem("min:private-keys",this._keys)];case 1:return t.sent(),[2]}})})},t.prototype._delType=function(e){return a(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return delete this._keys[e],[4,this.store.setItem("min:private-keys",this._keys)];case 1:return t.sent(),[2]}})})},t.prototype._restoreKeys=function(){return a(this,void 0,void 0,function(){var e;return c(this,function(t){switch(t.label){case 0:return[4,(e=this).store.getItem("min:private-keys")];case 1:return e._keys=t.sent()||{},[2]}})})},t.prototype.del=function(r){return a(this,void 0,void 0,function(){var e;return c(this,function(t){switch(t.label){case 0:return e="min-"+r,[4,this.store.removeItem(e)];case 1:return t.sent(),[4,this._delType(r)];case 2:return t.sent(),this.emit("del",r),[2,r]}})})},t.prototype.exists=function(r){return a(this,void 0,void 0,function(){var e;return c(this,function(t){switch(t.label){case 0:return e="min-"+r,[4,this.store.keys()];case 1:return[2,0<=t.sent().indexOf(e)]}})})},t.prototype.is=function(e,r){return a(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,this.exists(e)];case 1:if(!(t.sent()&&!!this._keys[e]))throw new Error("no such key");return[2,this._keys[e]===r]}})})},t.prototype.renamenx=function(n,s){return a(this,void 0,void 0,function(){var e,r;return c(this,function(t){switch(t.label){case 0:return[4,this.exists(n)];case 1:if(!t.sent())throw new Error("no such key");return[4,this.get(n)];case 2:return e=t.sent(),r=this._keys[n],[4,this.del(n)];case 3:return t.sent(),[4,this.set(s,e)];case 4:return t.sent(),[4,this._setType(s,r)];case 5:return t.sent(),[2,!0]}})})},t.prototype.rename=function(e,r){return a(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:if(e===r)throw new Error("The key is equal to the new key");return[4,this.renamenx(e,r)];case 1:return[2,t.sent()]}})})},t.prototype.keys=function(n){return void 0===n&&(n="*"),a(this,void 0,void 0,function(){var e,r;return c(this,function(t){switch(t.label){case 0:return[4,this.store.keys()];case 1:return e=t.sent().map(function(t){return t.substr(4)}),r=new RegExp(n.replace("?","(.)").replace("*","(.*)")),[2,e.filter(function(t){return r.test(t)})]}})})},t.prototype.randomKey=function(){return a(this,void 0,void 0,function(){var e,r;return c(this,function(t){switch(t.label){case 0:return[4,this.store.keys()];case 1:return e=t.sent().map(function(t){return t.substr(4)}),r=Math.round(Math.random()*(e.length-1)),[2,e[r]]}})})},t.prototype.type=function(e){return a(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,this.exists(e)];case 1:if(!(t.sent()&&void 0!==this._keys[e]))throw new Error("no such key");return[2,i[this._keys[e]]]}})})},t.prototype.empty=function(){return a(this,void 0,void 0,function(){var e;return c(this,function(t){switch(t.label){case 0:return[4,this.keys("*")];case 1:return e=t.sent().length,this._keys={},u.dropInstance({name:this.name}),this.store=u.createInstance({name:this.name}),this.emit("empty",e),[2,e]}})})},t.prototype.set=function(r,n){return a(this,void 0,void 0,function(){var e;return c(this,function(t){switch(t.label){case 0:return e="min-"+r,[4,this.store.setItem(e,n)];case 1:return t.sent(),[4,this._setType(r,i.mix)];case 2:return t.sent(),this.emit("set",r,n),[2,r]}})})},t.prototype.setnx=function(e,r){return a(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,this.exists(e)];case 1:if(t.sent())throw new Error("the key is exists");return[4,this.set(e,r)];case 2:return[2,t.sent()]}})})},t.prototype.setex=function(e,r,n){return a(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,this.psetex(e,1e3*r,n)];case 1:return[2,t.sent()]}})})},t.prototype.psetex=function(r,n,s){return a(this,void 0,void 0,function(){var e=this;return c(this,function(t){switch(t.label){case 0:return[4,this.set(r,s)];case 1:return t.sent(),setTimeout(function(){e.del(r)},n),[2,r]}})})},t.prototype.mset=function(u){return a(this,void 0,void 0,function(){var e,r,n,s,i,o;return c(this,function(t){switch(t.label){case 0:e=[],r=[],n=0,s=Object.keys(u),t.label=1;case 1:if(!(n<s.length))return[3,6];i=s[n],t.label=2;case 2:return t.trys.push([2,4,,5]),[4,this.set(i,u[i])];case 3:return t.sent(),e.push(i),[3,5];case 4:return o=t.sent(),r.push(o),[3,5];case 5:return n++,[3,1];case 6:if(0<r.length)throw r;return[2,e]}})})},t.prototype.append=function(n,s){return a(this,void 0,void 0,function(){var e,r;return c(this,function(t){switch(t.label){case 0:return[4,this.exists(n)];case 1:return t.sent()?[4,this.get(n)]:[3,3];case 2:return r=t.sent(),[3,4];case 3:r="",t.label=4;case 4:return e=r,[4,this.set(n,e+s)];case 5:return[2,t.sent().length]}})})},t.prototype.get=function(n){return a(this,void 0,void 0,function(){var e,r;return c(this,function(t){switch(t.label){case 0:return[4,this.exists(n)];case 1:if(!t.sent())throw new Error("no such key");return e="min-"+n,[4,this.store.getItem(e)];case 2:return r=t.sent(),this.emit("get",n,r),[2,r]}})})},t.prototype.getrange=function(s,i,o){return a(this,void 0,void 0,function(){var e,r,n;return c(this,function(t){switch(t.label){case 0:return e=o-i+1,[4,this.get(s)];case 1:return r=t.sent(),n=r.substr(i,e),this.emit("getrange",s,i,o,n),[2,n]}})})},t.prototype.mget=function(n){return a(this,void 0,void 0,function(){var e,r=this;return c(this,function(t){switch(t.label){case 0:return[4,Promise.all(n.map(function(t){return r.get(t)}))];case 1:return e=t.sent(),this.emit("mget",n,e),[2,e]}})})},t.prototype.getset=function(r,n){return a(this,void 0,void 0,function(){var e;return c(this,function(t){switch(t.label){case 0:return[4,this.get(r)];case 1:return e=t.sent(),[4,this.set(r,n)];case 2:return t.sent(),this.emit("getset",r,n,e),[2,e]}})})},t.prototype.strlen=function(r){return a(this,void 0,void 0,function(){var e;return c(this,function(t){switch(t.label){case 0:return[4,this.get(r)];case 1:if("string"!=typeof(e=t.sent()))throw new TypeError;return[2,e.length]}})})},t.prototype.incr=function(n){return a(this,void 0,void 0,function(){var e,r;return c(this,function(t){switch(t.label){case 0:return[4,this.exists(n)];case 1:return t.sent()?[4,this.get(n)]:[3,3];case 2:return r=t.sent(),[3,4];case 3:r=0,t.label=4;case 4:if(e=r,isNaN(parseInt(e,10)))throw new TypeError("value wrong");return e=parseInt(e,10),[4,this.set(n,++e)];case 5:return t.sent(),this.emit("incr",n,parseInt(e,10)),[2,e]}})})},t}(h.EventEmitter);e.Base=f},function(t,e){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function a(t){return"function"==typeof t}function c(t){return"object"==typeof t&&null!==t}function h(t){return void 0===t}((t.exports=n).EventEmitter=n).prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},n.prototype.emit=function(t){var e,r,n,s,i,o;if(this._events||(this._events={}),"error"===t&&(!this._events.error||c(this._events.error)&&!this._events.error.length)){if((e=arguments[1])instanceof Error)throw e;var u=new Error('Uncaught, unspecified "error" event. ('+e+")");throw u.context=e,u}if(h(r=this._events[t]))return!1;if(a(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),r.apply(this,s)}else if(c(r))for(s=Array.prototype.slice.call(arguments,1),n=(o=r.slice()).length,i=0;i<n;i++)o[i].apply(this,s);return!0},n.prototype.on=n.prototype.addListener=function(t,e){var r;if(!a(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,a(e.listener)?e.listener:e),this._events[t]?c(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,c(this._events[t])&&!this._events[t].warned&&(r=h(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&0<r&&this._events[t].length>r&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace()),this},n.prototype.once=function(t,e){if(!a(e))throw TypeError("listener must be a function");var r=!1;function n(){this.removeListener(t,n),r||(r=!0,e.apply(this,arguments))}return n.listener=e,this.on(t,n),this},n.prototype.removeListener=function(t,e){var r,n,s,i;if(!a(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(s=(r=this._events[t]).length,n=-1,r===e||a(r.listener)&&r.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(c(r)){for(i=s;0<i--;)if(r[i]===e||r[i].listener&&r[i].listener===e){n=i;break}if(n<0)return this;1===r.length?(r.length=0,delete this._events[t]):r.splice(n,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},n.prototype.removeAllListeners=function(t){var e,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(a(r=this._events[t]))this.removeListener(t,r);else if(r)for(;r.length;)this.removeListener(t,r[r.length-1]);return delete this._events[t],this},n.prototype.listeners=function(t){return this._events&&this._events[t]?a(this._events[t])?[this._events[t]]:this._events[t].slice():[]},n.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(a(e))return 1;if(e)return e.length}return 0},n.listenerCount=function(t,e){return t.listenerCount(e)}},function(t,e,r){"use strict";var n,s=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var i,o=r(1),u=r(0),a=r(5),c=r(6),h=r(7),f=r(9),l=r(10),p=function(n){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=n.call(this)||this;return u.Base.call.apply(u.Base,[r].concat(t)),r}return s(t,n),t.prototype.multi=function(){return new l.Multi(this)},t}(o.EventEmitter);e.MinDB=p,i=p,[u.Base,a.default,c.default,h.default,f.default].forEach(function(e){Object.getOwnPropertyNames(e.prototype).forEach(function(t){i.prototype[t]=e.prototype[t]})}),e.default=new p},function(t,e,r){(function(n){t.exports=function s(i,o,u){function a(r,t){if(!o[r]){if(!i[r]){if(c)return c(r,!0);var e=new Error("Cannot find module '"+r+"'");throw e.code="MODULE_NOT_FOUND",e}var n=o[r]={exports:{}};i[r][0].call(n.exports,function(t){var e=i[r][1][t];return a(e||t)},n,n.exports,s,i,o,u)}return o[r].exports}for(var c=!1,t=0;t<u.length;t++)a(u[t]);return a}({1:[function(t,h,e){(function(e){"use strict";var r,n,t=e.MutationObserver||e.WebKitMutationObserver;if(t){var s=0,i=new t(c),o=e.document.createTextNode("");i.observe(o,{characterData:!0}),r=function(){o.data=s=++s%2}}else if(e.setImmediate||void 0===e.MessageChannel)r="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){c(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(c,0)};else{var u=new e.MessageChannel;u.port1.onmessage=c,r=function(){u.port2.postMessage(0)}}var a=[];function c(){var t,e;n=!0;for(var r=a.length;r;){for(e=a,a=[],t=-1;++t<r;)e[t]();r=a.length}n=!1}h.exports=function(t){1!==a.push(t)||n||r()}}).call(this,void 0!==n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(t,e,r){"use strict";var s=t(1);function c(){}var h={},i=["REJECTED"],o=["FULFILLED"],u=["PENDING"];function n(t){if("function"!=typeof t)throw new TypeError("resolver must be a function");this.state=u,this.queue=[],this.outcome=void 0,t!==c&&p(this,t)}function a(t,e,r){this.promise=t,"function"==typeof e&&(this.onFulfilled=e,this.callFulfilled=this.otherCallFulfilled),"function"==typeof r&&(this.onRejected=r,this.callRejected=this.otherCallRejected)}function f(e,r,n){s(function(){var t;try{t=r(n)}catch(t){return h.reject(e,t)}t===e?h.reject(e,new TypeError("Cannot resolve promise with itself")):h.resolve(e,t)})}function l(t){var e=t&&t.then;if(t&&("object"==typeof t||"function"==typeof t)&&"function"==typeof e)return function(){e.apply(t,arguments)}}function p(e,t){var r=!1;function n(t){r||(r=!0,h.reject(e,t))}function s(t){r||(r=!0,h.resolve(e,t))}var i=d(function(){t(s,n)});"error"===i.status&&n(i.value)}function d(t,e){var r={};try{r.value=t(e),r.status="success"}catch(t){r.status="error",r.value=t}return r}(e.exports=n).prototype.catch=function(t){return this.then(null,t)},n.prototype.then=function(t,e){if("function"!=typeof t&&this.state===o||"function"!=typeof e&&this.state===i)return this;var r=new this.constructor(c);if(this.state!==u){var n=this.state===o?t:e;f(r,n,this.outcome)}else this.queue.push(new a(r,t,e));return r},a.prototype.callFulfilled=function(t){h.resolve(this.promise,t)},a.prototype.otherCallFulfilled=function(t){f(this.promise,this.onFulfilled,t)},a.prototype.callRejected=function(t){h.reject(this.promise,t)},a.prototype.otherCallRejected=function(t){f(this.promise,this.onRejected,t)},h.resolve=function(t,e){var r=d(l,e);if("error"===r.status)return h.reject(t,r.value);var n=r.value;if(n)p(t,n);else{t.state=o,t.outcome=e;for(var s=-1,i=t.queue.length;++s<i;)t.queue[s].callFulfilled(e)}return t},h.reject=function(t,e){t.state=i,t.outcome=e;for(var r=-1,n=t.queue.length;++r<n;)t.queue[r].callRejected(e);return t},n.resolve=function(t){return t instanceof this?t:h.resolve(new this(c),t)},n.reject=function(t){var e=new this(c);return h.reject(e,t)},n.all=function(t){var r=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var n=t.length,s=!1;if(!n)return this.resolve([]);for(var i=new Array(n),o=0,e=-1,u=new this(c);++e<n;)a(t[e],e);return u;function a(t,e){r.resolve(t).then(function(t){i[e]=t,++o!==n||s||(s=!0,h.resolve(u,i))},function(t){s||(s=!0,h.reject(u,t))})}},n.race=function(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var r=t.length,n=!1;if(!r)return this.resolve([]);for(var s,i=-1,o=new this(c);++i<r;)s=t[i],e.resolve(s).then(function(t){n||(n=!0,h.resolve(o,t))},function(t){n||(n=!0,h.reject(o,t))});return o}},{1:1}],3:[function(e,t,r){(function(t){"use strict";"function"!=typeof t.Promise&&(t.Promise=e(2))}).call(this,void 0!==n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2}],4:[function(t,e,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=function(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(t){return}}();function o(e,r){e=e||[],r=r||{};try{return new Blob(e,r)}catch(t){if("TypeError"!==t.name)throw t;for(var n="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder,s=new n,i=0;i<e.length;i+=1)s.append(e[i]);return s.getBlob(r.type)}}"undefined"==typeof Promise&&t(3);var f=Promise;function l(t,e){e&&t.then(function(t){e(null,t)},function(t){e(t)})}function c(t,e,r){"function"==typeof e&&t.then(e),"function"==typeof r&&t.catch(r)}function h(t){return"string"!=typeof t&&(console.warn(t+" used as a key, but it is not a string."),t=String(t)),t}function i(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var u="local-forage-detect-blob-support",s=void 0,p={},d=Object.prototype.toString,y="readonly",v="readwrite";function b(t){return"boolean"==typeof s?f.resolve(s):(n=t,new f(function(r){var t=n.transaction(u,v),e=o([""]);t.objectStore(u).put(e,"key"),t.onabort=function(t){t.preventDefault(),t.stopPropagation(),r(!1)},t.oncomplete=function(){var t=navigator.userAgent.match(/Chrome\/(\d+)/),e=navigator.userAgent.match(/Edge\//);r(e||!t||43<=parseInt(t[1],10))}}).catch(function(){return!1})).then(function(t){return s=t});var n}function m(t){var e=p[t.name],r={};r.promise=new f(function(t,e){r.resolve=t,r.reject=e}),e.deferredOperations.push(r),e.dbReady?e.dbReady=e.dbReady.then(function(){return r.promise}):e.dbReady=r.promise}function g(t){var e=p[t.name],r=e.deferredOperations.pop();if(r)return r.resolve(),r.promise}function w(t,e){var r=p[t.name],n=r.deferredOperations.pop();if(n)return n.reject(e),n.promise}function _(s,i){return new f(function(t,e){if(p[s.name]=p[s.name]||{forages:[],db:null,dbReady:null,deferredOperations:[]},s.db){if(!i)return t(s.db);m(s),s.db.close()}var r=[s.name];i&&r.push(s.version);var n=a.open.apply(a,r);i&&(n.onupgradeneeded=function(e){var t=n.result;try{t.createObjectStore(s.storeName),e.oldVersion<=1&&t.createObjectStore(u)}catch(t){if("ConstraintError"!==t.name)throw t;console.warn('The database "'+s.name+'" has been upgraded from version '+e.oldVersion+" to version "+e.newVersion+', but the storage "'+s.storeName+'" already exists.')}}),n.onerror=function(t){t.preventDefault(),e(n.error)},n.onsuccess=function(){t(n.result),g(s)}})}function k(t){return _(t,!1)}function E(t){return _(t,!0)}function x(t,e){if(!t.db)return!0;var r=!t.db.objectStoreNames.contains(t.storeName),n=t.version<t.db.version,s=t.version>t.db.version;if(n&&(t.version!==e&&console.warn('The database "'+t.name+"\" can't be downgraded from version "+t.db.version+" to version "+t.version+"."),t.version=t.db.version),s||r){if(r){var i=t.db.version+1;i>t.version&&(t.version=i)}return!0}return!1}function S(t){var e=function(t){for(var e=t.length,r=new ArrayBuffer(e),n=new Uint8Array(r),s=0;s<e;s++)n[s]=t.charCodeAt(s);return r}(atob(t.data));return o([e],{type:t.type})}function T(t){return t&&t.__local_forage_encoded_blob}function I(t){var e=this,r=e._initReady().then(function(){var t=p[e._dbInfo.name];if(t&&t.dbReady)return t.dbReady});return c(r,t,t),r}function O(e,r,n,s){void 0===s&&(s=1);try{var t=e.db.transaction(e.storeName,r);n(null,t)}catch(t){if(0<s&&(!e.db||"InvalidStateError"===t.name||"NotFoundError"===t.name))return f.resolve().then(function(){if(!e.db||"NotFoundError"===t.name&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version)return e.db&&(e.version=e.db.version+1),E(e)}).then(function(){return function(r){m(r);for(var n=p[r.name],s=n.forages,t=0;t<s.length;t++){var e=s[t];e._dbInfo.db&&(e._dbInfo.db.close(),e._dbInfo.db=null)}return r.db=null,k(r).then(function(t){return r.db=t,x(r)?E(r):t}).then(function(t){r.db=n.db=t;for(var e=0;e<s.length;e++)s[e]._dbInfo.db=t}).catch(function(t){throw w(r,t),t})}(e).then(function(){O(e,r,n,s-1)})}).catch(n);n(t)}}var j={_driver:"asyncStorage",_initStorage:function(t){var n=this,s={db:null};if(t)for(var e in t)s[e]=t[e];var i=p[s.name];i||(i={forages:[],db:null,dbReady:null,deferredOperations:[]},p[s.name]=i),i.forages.push(n),n._initReady||(n._initReady=n.ready,n.ready=I);var r=[];function o(){return f.resolve()}for(var u=0;u<i.forages.length;u++){var a=i.forages[u];a!==n&&r.push(a._initReady().catch(o))}var c=i.forages.slice(0);return f.all(r).then(function(){return s.db=i.db,k(s)}).then(function(t){return s.db=t,x(s,n._defaultConfig.version)?E(s):t}).then(function(t){s.db=i.db=t,n._dbInfo=s;for(var e=0;e<c.length;e++){var r=c[e];r!==n&&(r._dbInfo.db=s.db,r._dbInfo.version=s.version)}})},_support:function(){try{if(!a)return!1;var t="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),e="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!t||e)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(t){return!1}}(),iterate:function(u,t){var a=this,e=new f(function(i,o){a.ready().then(function(){O(a._dbInfo,y,function(t,e){if(t)return o(t);try{var r=e.objectStore(a._dbInfo.storeName),n=r.openCursor(),s=1;n.onsuccess=function(){var t=n.result;if(t){var e=t.value;T(e)&&(e=S(e));var r=u(e,t.key,s++);void 0!==r?i(r):t.continue()}else i()},n.onerror=function(){o(n.error)}}catch(t){o(t)}})}).catch(o)});return l(e,t),e},getItem:function(o,t){var u=this;o=h(o);var e=new f(function(s,i){u.ready().then(function(){O(u._dbInfo,y,function(t,e){if(t)return i(t);try{var r=e.objectStore(u._dbInfo.storeName),n=r.get(o);n.onsuccess=function(){var t=n.result;void 0===t&&(t=null),T(t)&&(t=S(t)),s(t)},n.onerror=function(){i(n.error)}}catch(t){i(t)}})}).catch(i)});return l(e,t),e},setItem:function(u,e,t){var a=this;u=h(u);var r=new f(function(i,o){var t;a.ready().then(function(){return t=a._dbInfo,"[object Blob]"===d.call(e)?b(t.db).then(function(t){return t?e:(n=e,new f(function(r,t){var e=new FileReader;e.onerror=t,e.onloadend=function(t){var e=btoa(t.target.result||"");r({__local_forage_encoded_blob:!0,data:e,type:n.type})},e.readAsBinaryString(n)}));var n}):e}).then(function(s){O(a._dbInfo,v,function(t,e){if(t)return o(t);try{var r=e.objectStore(a._dbInfo.storeName);null===s&&(s=void 0);var n=r.put(s,u);e.oncomplete=function(){void 0===s&&(s=null),i(s)},e.onabort=e.onerror=function(){var t=n.error?n.error:n.transaction.error;o(t)}}catch(t){o(t)}})}).catch(o)});return l(r,t),r},removeItem:function(o,t){var u=this;o=h(o);var e=new f(function(s,i){u.ready().then(function(){O(u._dbInfo,v,function(t,e){if(t)return i(t);try{var r=e.objectStore(u._dbInfo.storeName),n=r.delete(o);e.oncomplete=function(){s()},e.onerror=function(){i(n.error)},e.onabort=function(){var t=n.error?n.error:n.transaction.error;i(t)}}catch(t){i(t)}})}).catch(i)});return l(e,t),e},clear:function(t){var o=this,e=new f(function(s,i){o.ready().then(function(){O(o._dbInfo,v,function(t,e){if(t)return i(t);try{var r=e.objectStore(o._dbInfo.storeName),n=r.clear();e.oncomplete=function(){s()},e.onabort=e.onerror=function(){var t=n.error?n.error:n.transaction.error;i(t)}}catch(t){i(t)}})}).catch(i)});return l(e,t),e},length:function(t){var o=this,e=new f(function(s,i){o.ready().then(function(){O(o._dbInfo,y,function(t,e){if(t)return i(t);try{var r=e.objectStore(o._dbInfo.storeName),n=r.count();n.onsuccess=function(){s(n.result)},n.onerror=function(){i(n.error)}}catch(t){i(t)}})}).catch(i)});return l(e,t),e},key:function(u,t){var a=this,e=new f(function(i,o){u<0?i(null):a.ready().then(function(){O(a._dbInfo,y,function(t,e){if(t)return o(t);try{var r=e.objectStore(a._dbInfo.storeName),n=!1,s=r.openCursor();s.onsuccess=function(){var t=s.result;t?0===u?i(t.key):n?i(t.key):(n=!0,t.advance(u)):i(null)},s.onerror=function(){o(s.error)}}catch(t){o(t)}})}).catch(o)});return l(e,t),e},keys:function(t){var u=this,e=new f(function(i,o){u.ready().then(function(){O(u._dbInfo,y,function(t,e){if(t)return o(t);try{var r=e.objectStore(u._dbInfo.storeName),n=r.openCursor(),s=[];n.onsuccess=function(){var t=n.result;t?(s.push(t.key),t.continue()):i(s)},n.onerror=function(){o(n.error)}}catch(t){o(t)}})}).catch(o)});return l(e,t),e},dropInstance:function(u,t){t=i.apply(this,arguments);var e,r=this.config();if((u="function"!=typeof u&&u||{}).name||(u.name=u.name||r.name,u.storeName=u.storeName||r.storeName),u.name){var n=u.name===r.name&&this._dbInfo.db,s=n?f.resolve(this._dbInfo.db):k(u).then(function(t){var e=p[u.name],r=e.forages;e.db=t;for(var n=0;n<r.length;n++)r[n]._dbInfo.db=t;return t});e=u.storeName?s.then(function(t){if(t.objectStoreNames.contains(u.storeName)){var s=t.version+1;m(u);var n=p[u.name],i=n.forages;t.close();for(var e=0;e<i.length;e++){var r=i[e];r._dbInfo.db=null,r._dbInfo.version=s}var o=new f(function(e,r){var n=a.open(u.name,s);n.onerror=function(t){var e=n.result;e.close(),r(t)},n.onupgradeneeded=function(){var t=n.result;t.deleteObjectStore(u.storeName)},n.onsuccess=function(){var t=n.result;t.close(),e(t)}});return o.then(function(t){n.db=t;for(var e=0;e<i.length;e++){var r=i[e];r._dbInfo.db=t,g(r._dbInfo)}}).catch(function(t){throw(w(u,t)||f.resolve()).catch(function(){}),t})}}):s.then(function(t){m(u);var n=p[u.name],s=n.forages;t.close();for(var e=0;e<s.length;e++){var r=s[e];r._dbInfo.db=null}var i=new f(function(e,r){var n=a.deleteDatabase(u.name);n.onerror=n.onblocked=function(t){var e=n.result;e&&e.close(),r(t)},n.onsuccess=function(){var t=n.result;t&&t.close(),e(t)}});return i.then(function(t){n.db=t;for(var e=0;e<s.length;e++){var r=s[e];g(r._dbInfo)}}).catch(function(t){throw(w(u,t)||f.resolve()).catch(function(){}),t})})}else e=f.reject("Invalid arguments");return l(e,t),e}},P="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",q=/^~~local_forage_type~([^~]+)~/,N="__lfsc__:",z=N.length,A="arbf",B="blob",R=z+A.length,D=Object.prototype.toString;function L(t){var e,r,n,s,i,o=.75*t.length,u=t.length,a=0;"="===t[t.length-1]&&(o--,"="===t[t.length-2]&&o--);var c=new ArrayBuffer(o),h=new Uint8Array(c);for(e=0;e<u;e+=4)r=P.indexOf(t[e]),n=P.indexOf(t[e+1]),s=P.indexOf(t[e+2]),i=P.indexOf(t[e+3]),h[a++]=r<<2|n>>4,h[a++]=(15&n)<<4|s>>2,h[a++]=(3&s)<<6|63&i;return c}function M(t){var e,r=new Uint8Array(t),n="";for(e=0;e<r.length;e+=3)n+=P[r[e]>>2],n+=P[(3&r[e])<<4|r[e+1]>>4],n+=P[(15&r[e+1])<<2|r[e+2]>>6],n+=P[63&r[e+2]];return r.length%3==2?n=n.substring(0,n.length-1)+"=":r.length%3==1&&(n=n.substring(0,n.length-2)+"=="),n}var Y={serialize:function(e,r){var t="";if(e&&(t=D.call(e)),e&&("[object ArrayBuffer]"===t||e.buffer&&"[object ArrayBuffer]"===D.call(e.buffer))){var n,s=N;e instanceof ArrayBuffer?(n=e,s+=A):(n=e.buffer,"[object Int8Array]"===t?s+="si08":"[object Uint8Array]"===t?s+="ui08":"[object Uint8ClampedArray]"===t?s+="uic8":"[object Int16Array]"===t?s+="si16":"[object Uint16Array]"===t?s+="ur16":"[object Int32Array]"===t?s+="si32":"[object Uint32Array]"===t?s+="ui32":"[object Float32Array]"===t?s+="fl32":"[object Float64Array]"===t?s+="fl64":r(new Error("Failed to get type for BinaryArray"))),r(s+M(n))}else if("[object Blob]"===t){var i=new FileReader;i.onload=function(){var t="~~local_forage_type~"+e.type+"~"+M(this.result);r(N+B+t)},i.readAsArrayBuffer(e)}else try{r(JSON.stringify(e))}catch(t){console.error("Couldn't convert value into a JSON string: ",e),r(null,t)}},deserialize:function(t){if(t.substring(0,z)!==N)return JSON.parse(t);var e,r=t.substring(R),n=t.substring(z,R);if(n===B&&q.test(r)){var s=r.match(q);e=s[1],r=r.substring(s[0].length)}var i=L(r);switch(n){case A:return i;case B:return o([i],{type:e});case"si08":return new Int8Array(i);case"ui08":return new Uint8Array(i);case"uic8":return new Uint8ClampedArray(i);case"si16":return new Int16Array(i);case"ur16":return new Uint16Array(i);case"si32":return new Int32Array(i);case"ui32":return new Uint32Array(i);case"fl32":return new Float32Array(i);case"fl64":return new Float64Array(i);default:throw new Error("Unkown type: "+n)}},stringToBuffer:L,bufferToString:M};function C(t,e,r,n){t.executeSql("CREATE TABLE IF NOT EXISTS "+e.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],r,n)}function F(t,n,s,i,o,u){t.executeSql(s,i,o,function(t,r){r.code===r.SYNTAX_ERR?t.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[n.storeName],function(t,e){e.rows.length?u(t,r):C(t,n,function(){t.executeSql(s,i,o,u)},u)},u):u(t,r)},u)}function U(o,t,u,a){var c=this;o=h(o);var e=new f(function(s,i){c.ready().then(function(){void 0===t&&(t=null);var r=t,n=c._dbInfo;n.serializer.serialize(t,function(e,t){t?i(t):n.db.transaction(function(t){F(t,n,"INSERT OR REPLACE INTO "+n.storeName+" (key, value) VALUES (?, ?)",[o,e],function(){s(r)},function(t,e){i(e)})},function(t){if(t.code===t.QUOTA_ERR){if(0<a)return void s(U.apply(c,[o,r,u,a-1]));i(t)}})})}).catch(i)});return l(e,u),e}var W={_driver:"webSQLStorage",_initStorage:function(t){var n=this,s={db:null};if(t)for(var e in t)s[e]="string"!=typeof t[e]?t[e].toString():t[e];var r=new f(function(e,r){try{s.db=openDatabase(s.name,String(s.version),s.description,s.size)}catch(t){return r(t)}s.db.transaction(function(t){C(t,s,function(){n._dbInfo=s,e()},function(t,e){r(e)})},r)});return s.serializer=Y,r},_support:"function"==typeof openDatabase,iterate:function(c,t){var e=this,r=new f(function(a,r){e.ready().then(function(){var u=e._dbInfo;u.db.transaction(function(t){F(t,u,"SELECT * FROM "+u.storeName,[],function(t,e){for(var r=e.rows,n=r.length,s=0;s<n;s++){var i=r.item(s),o=i.value;if(o&&(o=u.serializer.deserialize(o)),void 0!==(o=c(o,i.key,s+1)))return void a(o)}a()},function(t,e){r(e)})})}).catch(r)});return l(r,t),r},getItem:function(e,t){var i=this;e=h(e);var r=new f(function(s,r){i.ready().then(function(){var n=i._dbInfo;n.db.transaction(function(t){F(t,n,"SELECT * FROM "+n.storeName+" WHERE key = ? LIMIT 1",[e],function(t,e){var r=e.rows.length?e.rows.item(0).value:null;r&&(r=n.serializer.deserialize(r)),s(r)},function(t,e){r(e)})})}).catch(r)});return l(r,t),r},setItem:function(t,e,r){return U.apply(this,[t,e,r,1])},removeItem:function(s,t){var i=this;s=h(s);var e=new f(function(r,n){i.ready().then(function(){var e=i._dbInfo;e.db.transaction(function(t){F(t,e,"DELETE FROM "+e.storeName+" WHERE key = ?",[s],function(){r()},function(t,e){n(e)})})}).catch(n)});return l(e,t),e},clear:function(t){var s=this,e=new f(function(r,n){s.ready().then(function(){var e=s._dbInfo;e.db.transaction(function(t){F(t,e,"DELETE FROM "+e.storeName,[],function(){r()},function(t,e){n(e)})})}).catch(n)});return l(e,t),e},length:function(t){var s=this,e=new f(function(n,r){s.ready().then(function(){var e=s._dbInfo;e.db.transaction(function(t){F(t,e,"SELECT COUNT(key) as c FROM "+e.storeName,[],function(t,e){var r=e.rows.item(0).c;n(r)},function(t,e){r(e)})})}).catch(r)});return l(e,t),e},key:function(s,t){var i=this,e=new f(function(n,r){i.ready().then(function(){var e=i._dbInfo;e.db.transaction(function(t){F(t,e,"SELECT key FROM "+e.storeName+" WHERE id = ? LIMIT 1",[s+1],function(t,e){var r=e.rows.length?e.rows.item(0).key:null;n(r)},function(t,e){r(e)})})}).catch(r)});return l(e,t),e},keys:function(t){var n=this,e=new f(function(s,r){n.ready().then(function(){var e=n._dbInfo;e.db.transaction(function(t){F(t,e,"SELECT key FROM "+e.storeName,[],function(t,e){for(var r=[],n=0;n<e.rows.length;n++)r.push(e.rows.item(n).key);s(r)},function(t,e){r(e)})})}).catch(r)});return l(e,t),e},dropInstance:function(r,t){t=i.apply(this,arguments);var n=this.config();(r="function"!=typeof r&&r||{}).name||(r.name=r.name||n.name,r.storeName=r.storeName||n.storeName);var e,s=this;return l(e=r.name?new f(function(t){var e,i;e=r.name===n.name?s._dbInfo.db:openDatabase(r.name,"","",0),r.storeName?t({db:e,storeNames:[r.storeName]}):t((i=e,new f(function(s,r){i.transaction(function(t){t.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(t,e){for(var r=[],n=0;n<e.rows.length;n++)r.push(e.rows.item(n).name);s({db:i,storeNames:r})},function(t,e){r(e)})},function(t){r(t)})})))}).then(function(u){return new f(function(i,o){u.db.transaction(function(n){function t(e){return new f(function(t,r){n.executeSql("DROP TABLE IF EXISTS "+e,[],function(){t()},function(t,e){r(e)})})}for(var e=[],r=0,s=u.storeNames.length;r<s;r++)e.push(t(u.storeNames[r]));f.all(e).then(function(){i()}).catch(function(t){o(t)})},function(t){o(t)})})}):f.reject("Invalid arguments"),t),e}};function G(t,e){var r=t.name+"/";return t.storeName!==e.storeName&&(r+=t.storeName+"/"),r}function K(){return!function(){var t="_localforage_support_test";try{return localStorage.setItem(t,!0),localStorage.removeItem(t),!1}catch(t){return!0}}()||0<localStorage.length}var H={_driver:"localStorageWrapper",_initStorage:function(t){var e={};if(t)for(var r in t)e[r]=t[r];return e.keyPrefix=G(t,this._defaultConfig),K()?((this._dbInfo=e).serializer=Y,f.resolve()):f.reject()},_support:function(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(t){return!1}}(),iterate:function(a,t){var c=this,e=c.ready().then(function(){for(var t=c._dbInfo,e=t.keyPrefix,r=e.length,n=localStorage.length,s=1,i=0;i<n;i++){var o=localStorage.key(i);if(0===o.indexOf(e)){var u=localStorage.getItem(o);if(u&&(u=t.serializer.deserialize(u)),void 0!==(u=a(u,o.substring(r),s++)))return u}}});return l(e,t),e},getItem:function(r,t){var n=this;r=h(r);var e=n.ready().then(function(){var t=n._dbInfo,e=localStorage.getItem(t.keyPrefix+r);return e&&(e=t.serializer.deserialize(e)),e});return l(e,t),e},setItem:function(o,t,e){var u=this;o=h(o);var r=u.ready().then(function(){void 0===t&&(t=null);var i=t;return new f(function(r,n){var s=u._dbInfo;s.serializer.serialize(t,function(t,e){if(e)n(e);else try{localStorage.setItem(s.keyPrefix+o,t),r(i)}catch(t){"QuotaExceededError"!==t.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==t.name||n(t),n(t)}})})});return l(r,e),r},removeItem:function(e,t){var r=this;e=h(e);var n=r.ready().then(function(){var t=r._dbInfo;localStorage.removeItem(t.keyPrefix+e)});return l(n,t),n},clear:function(t){var n=this,e=n.ready().then(function(){for(var t=n._dbInfo.keyPrefix,e=localStorage.length-1;0<=e;e--){var r=localStorage.key(e);0===r.indexOf(t)&&localStorage.removeItem(r)}});return l(e,t),e},length:function(t){var e=this.keys().then(function(t){return t.length});return l(e,t),e},key:function(r,t){var n=this,e=n.ready().then(function(){var e,t=n._dbInfo;try{e=localStorage.key(r)}catch(t){e=null}return e&&(e=e.substring(t.keyPrefix.length)),e});return l(e,t),e},keys:function(t){var i=this,e=i.ready().then(function(){for(var t=i._dbInfo,e=localStorage.length,r=[],n=0;n<e;n++){var s=localStorage.key(n);0===s.indexOf(t.keyPrefix)&&r.push(s.substring(t.keyPrefix.length))}return r});return l(e,t),e},dropInstance:function(e,t){if(t=i.apply(this,arguments),!(e="function"!=typeof e&&e||{}).name){var r=this.config();e.name=e.name||r.name,e.storeName=e.storeName||r.storeName}var n,s=this;return l(n=e.name?new f(function(t){e.storeName?t(G(e,s._defaultConfig)):t(e.name+"/")}).then(function(t){for(var e=localStorage.length-1;0<=e;e--){var r=localStorage.key(e);0===r.indexOf(t)&&localStorage.removeItem(r)}}):f.reject("Invalid arguments"),t),n}},Q=function(t,e){for(var r=t.length,n=0;n<r;){if((s=t[n])===(i=e)||"number"==typeof s&&"number"==typeof i&&isNaN(s)&&isNaN(i))return!0;n++}var s,i;return!1},X=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},J={},V={},Z={INDEXEDDB:j,WEBSQL:W,LOCALSTORAGE:H},$=[Z.INDEXEDDB._driver,Z.WEBSQL._driver,Z.LOCALSTORAGE._driver],tt=["dropInstance"],et=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(tt),rt={description:"",driver:$.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function nt(e,r){e[r]=function(){var t=arguments;return e.ready().then(function(){return e[r].apply(e,t)})}}function st(){for(var t=1;t<arguments.length;t++){var e=arguments[t];if(e)for(var r in e)e.hasOwnProperty(r)&&(X(e[r])?arguments[0][r]=e[r].slice():arguments[0][r]=e[r])}return arguments[0]}var it=function(){function s(t){for(var e in function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),Z)if(Z.hasOwnProperty(e)){var r=Z[e],n=r._driver;this[e]=n,J[n]||this.defineDriver(r)}this._defaultConfig=st({},rt),this._config=st({},this._defaultConfig,t),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return s.prototype.config=function(t){if("object"!==(void 0===t?"undefined":n(t)))return"string"==typeof t?this._config[t]:this._config;if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var e in t){if("storeName"===e&&(t[e]=t[e].replace(/\W/g,"_")),"version"===e&&"number"!=typeof t[e])return new Error("Database version must be a number.");this._config[e]=t[e]}return!("driver"in t&&t.driver)||this.setDriver(this._config.driver)},s.prototype.defineDriver=function(h,t,e){var r=new f(function(e,r){try{var n=h._driver,t=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!h._driver)return void r(t);for(var s=et.concat("_initStorage"),i=0,o=s.length;i<o;i++){var u=s[i],a=!Q(tt,u);if((a||h[u])&&"function"!=typeof h[u])return void r(t)}!function(){for(var t=function(r){return function(){var t=new Error("Method "+r+" is not implemented by the current driver"),e=f.reject(t);return l(e,arguments[arguments.length-1]),e}},e=0,r=tt.length;e<r;e++){var n=tt[e];h[n]||(h[n]=t(n))}}();var c=function(t){J[n]&&console.info("Redefining LocalForage driver: "+n),J[n]=h,V[n]=t,e()};"_support"in h?h._support&&"function"==typeof h._support?h._support().then(c,r):c(!!h._support):c(!0)}catch(t){r(t)}});return c(r,t,e),r},s.prototype.driver=function(){return this._driver||null},s.prototype.getDriver=function(t,e,r){var n=J[t]?f.resolve(J[t]):f.reject(new Error("Driver not found."));return c(n,e,r),n},s.prototype.getSerializer=function(t){var e=f.resolve(Y);return c(e,t),e},s.prototype.ready=function(t){var e=this,r=e._driverSet.then(function(){return null===e._ready&&(e._ready=e._initDriver()),e._ready});return c(r,t,t),r},s.prototype.setDriver=function(t,e,r){var i=this;X(t)||(t=[t]);var n=this._getSupportedDrivers(t);function o(){i._config.driver=i.driver()}function u(t){return i._extend(t),o(),i._ready=i._initStorage(i._config),i._ready}var s=null!==this._driverSet?this._driverSet.catch(function(){return f.resolve()}):f.resolve();return this._driverSet=s.then(function(){var t=n[0];return i._dbInfo=null,i._ready=null,i.getDriver(t).then(function(t){var s;i._driver=t._driver,o(),i._wrapLibraryMethodsWithReady(),i._initDriver=(s=n,function(){var r=0;function n(){for(;r<s.length;){var t=s[r];return r++,i._dbInfo=null,i._ready=null,i.getDriver(t).then(u).catch(n)}o();var e=new Error("No available storage method found.");return i._driverSet=f.reject(e),i._driverSet}return n()})})}).catch(function(){o();var t=new Error("No available storage method found.");return i._driverSet=f.reject(t),i._driverSet}),c(this._driverSet,e,r),this._driverSet},s.prototype.supports=function(t){return!!V[t]},s.prototype._extend=function(t){st(this,t)},s.prototype._getSupportedDrivers=function(t){for(var e=[],r=0,n=t.length;r<n;r++){var s=t[r];this.supports(s)&&e.push(s)}return e},s.prototype._wrapLibraryMethodsWithReady=function(){for(var t=0,e=et.length;t<e;t++)nt(this,et[t])},s.prototype.createInstance=function(t){return new s(t)},s}(),ot=new it;e.exports=ot},{3:3}]},{},[4])(4)}).call(this,r(4))},function(t,e){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(t){"object"==typeof window&&(r=window)}t.exports=r},function(t,e,r){"use strict";var n,s=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),c=this&&this.__awaiter||function(i,o,u,a){return new(u||(u=Promise))(function(t,e){function r(t){try{s(a.next(t))}catch(t){e(t)}}function n(t){try{s(a.throw(t))}catch(t){e(t)}}function s(e){e.done?t(e.value):new u(function(t){t(e.value)}).then(r,n)}s((a=a.apply(i,o||[])).next())})},h=this&&this.__generator||function(r,n){var s,i,o,t,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(s)throw new TypeError("Generator is already executing.");for(;u;)try{if(s=1,i&&(o=2&e[0]?i.return:e[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,e[1])).done)return o;switch(i=0,o&&(e=[2&e[0],o.value]),e[0]){case 0:case 1:o=e;break;case 4:return u.label++,{value:e[1],done:!1};case 5:u.label++,i=e[1],e=[0];continue;case 7:e=u.ops.pop(),u.trys.pop();continue;default:if(!(o=0<(o=u.trys).length&&o[o.length-1])&&(6===e[0]||2===e[0])){u=0;continue}if(3===e[0]&&(!o||e[1]>o[0]&&e[1]<o[3])){u.label=e[1];break}if(6===e[0]&&u.label<o[1]){u.label=o[1],o=e;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(e);break}o[2]&&u.ops.pop(),u.trys.pop();continue}e=n.call(r,u)}catch(t){e=[6,t],i=0}finally{s=o=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};Object.defineProperty(e,"__esModule",{value:!0});var o=r(0),i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.prototype.hset=function(n,s,i){return c(this,void 0,void 0,function(){var e,r;return h(this,function(t){switch(t.label){case 0:return[4,this.exists(n)];case 1:return t.sent()?[4,this.get(n)]:[3,3];case 2:return r=t.sent(),[3,4];case 3:r={},t.label=4;case 4:return(e=r)[s]=i,[4,this.set(n,e)];case 5:return t.sent(),[4,this._setType(n,o.TYPES.hash)];case 6:return t.sent(),this.emit("hset",n,s,i),[2,n]}})})},e.prototype.hsetnx=function(e,r,n){return c(this,void 0,void 0,function(){return h(this,function(t){switch(t.label){case 0:return[4,this.hexists(e,r)];case 1:if(t.sent())throw new Error("The field of the hash is exists");return[4,this.hset(e,n,n)];case 2:return t.sent(),[2,e]}})})},e.prototype.hmset=function(u,a){return c(this,void 0,void 0,function(){var e,r,n,s,i,o;return h(this,function(t){switch(t.label){case 0:e=[],r=0,n=Object.keys(a),t.label=1;case 1:return r<n.length?(s=n[r],o=(i=e).push,[4,this.hset(u,s,a[s])]):[3,4];case 2:o.apply(i,[t.sent()]),t.label=3;case 3:return r++,[3,1];case 4:return[2,e]}})})},e.prototype.hget=function(n,s){return c(this,void 0,void 0,function(){var e,r;return h(this,function(t){switch(t.label){case 0:return[4,this.hexists(n,s)];case 1:if(!t.sent())throw new Error("no such field");return[4,this.get(n)];case 2:return e=t.sent(),r=e[s],this.emit("hget",n,s,r),[2,r]}})})},e.prototype.hmget=function(r,n){return c(this,void 0,void 0,function(){var e=this;return h(this,function(t){switch(t.label){case 0:return[4,Promise.all(n.map(function(t){return e.hget(r,t)}))];case 1:return[2,t.sent()]}})})},e.prototype.hgetall=function(e){return c(this,void 0,void 0,function(){return h(this,function(t){switch(t.label){case 0:return[4,this.is(e,o.TYPES.hash)];case 1:if(!t.sent())throw new TypeError("type wrong");return[4,this.get(e)];case 2:return[2,t.sent()]}})})},e.prototype.hdel=function(n,s){return c(this,void 0,void 0,function(){var e,r;return h(this,function(t){switch(t.label){case 0:return[4,this.hexists(n,s)];case 1:if(!t.sent())throw new Error("no such key");return[4,this.hgetall(n)];case 2:return e=t.sent(),r=e[s],delete e[s],[4,this.set(n,e)];case 3:return t.sent(),this.emit("hdel",n,s,r),[2,r]}})})},e.prototype.hlen=function(r){return c(this,void 0,void 0,function(){var e;return h(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.hgetall(r)];case 1:return e=t.sent(),[2,Object.keys(e).length];case 2:return t.sent(),[2,0];case 3:return[2]}})})},e.prototype.hkeys=function(r){return c(this,void 0,void 0,function(){var e;return h(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.hgetall(r)];case 1:return e=t.sent(),[2,Object.keys(e)];case 2:return t.sent(),[2,[]];case 3:return[2]}})})},e.prototype.hexists=function(e,r){return c(this,void 0,void 0,function(){return h(this,function(t){switch(t.label){case 0:return[4,this.exists(e)];case 1:return t.sent()?[4,this.is(e,o.TYPES.hash)]:[2,!1];case 2:return t.sent()?[4,this.get(e)]:[2,!1];case 3:return[2,t.sent().hasOwnProperty(r)]}})})},e.prototype.hincr=function(e,r){return c(this,void 0,void 0,function(){return h(this,function(t){return[2,this.hincrby(e,r,1)]})})},e.prototype.hincrby=function(i,o,u){return c(this,void 0,void 0,function(){var e,r,n,s;return h(this,function(t){switch(t.label){case 0:return[4,this.hexists(i,o)];case 1:return e=t.sent(),n=parseFloat,e?[4,this.hget(i,o)]:[3,3];case 2:return s=t.sent(),[3,4];case 3:s=0,t.label=4;case 4:if(r=n.apply(void 0,[s]),isNaN(r))throw new TypeError("type wrong");return[4,this.hset(i,o,r+u)];case 5:return t.sent(),this.emit("hincrby",i,o,r+u),[2,r+u]}})})},e.prototype.hincrbyfloat=function(e,r,n){return c(this,void 0,void 0,function(){return h(this,function(t){switch(t.label){case 0:return[4,this.hincrby(e,r,n)];case 1:return[2,t.sent()]}})})},e.prototype.hdecr=function(e,r){return c(this,void 0,void 0,function(){return h(this,function(t){switch(t.label){case 0:return[4,this.hdecrby(e,r,1)];case 1:return[2,t.sent()]}})})},e.prototype.hdecrby=function(i,o,u){return c(this,void 0,void 0,function(){var e,r,n,s;return h(this,function(t){switch(t.label){case 0:return[4,this.hexists(i,o)];case 1:return e=t.sent(),n=parseFloat,e?[4,this.hget(i,o)]:[3,3];case 2:return s=t.sent(),[3,4];case 3:s=0,t.label=4;case 4:if(r=n.apply(void 0,[s]),isNaN(r))throw new TypeError("type wrong");return[4,this.hset(i,o,r-u)];case 5:return t.sent(),this.emit("hincrby",i,o,r-u),[2,r-u]}})})},e.prototype.hdecrbyfloat=function(e,r,n){return c(this,void 0,void 0,function(){return h(this,function(t){switch(t.label){case 0:return[4,this.hdecrby(e,r,n)];case 1:return[2,t.sent()]}})})},e}(o.Base);e.default=i},function(t,e,r){"use strict";var n,s=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),a=this&&this.__awaiter||function(i,o,u,a){return new(u||(u=Promise))(function(t,e){function r(t){try{s(a.next(t))}catch(t){e(t)}}function n(t){try{s(a.throw(t))}catch(t){e(t)}}function s(e){e.done?t(e.value):new u(function(t){t(e.value)}).then(r,n)}s((a=a.apply(i,o||[])).next())})},c=this&&this.__generator||function(r,n){var s,i,o,t,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(s)throw new TypeError("Generator is already executing.");for(;u;)try{if(s=1,i&&(o=2&e[0]?i.return:e[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,e[1])).done)return o;switch(i=0,o&&(e=[2&e[0],o.value]),e[0]){case 0:case 1:o=e;break;case 4:return u.label++,{value:e[1],done:!1};case 5:u.label++,i=e[1],e=[0];continue;case 7:e=u.ops.pop(),u.trys.pop();continue;default:if(!(o=0<(o=u.trys).length&&o[o.length-1])&&(6===e[0]||2===e[0])){u=0;continue}if(3===e[0]&&(!o||e[1]>o[0]&&e[1]<o[3])){u.label=e[1];break}if(6===e[0]&&u.label<o[1]){u.label=o[1],o=e;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(e);break}o[2]&&u.ops.pop(),u.trys.pop();continue}e=n.call(r,u)}catch(t){e=[6,t],i=0}finally{s=o=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};Object.defineProperty(e,"__esModule",{value:!0});var h=r(0),i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.prototype.lpush=function(o){for(var u=[],t=1;t<arguments.length;t++)u[t-1]=arguments[t];return a(this,void 0,void 0,function(){var e,r,n,s,i;return c(this,function(t){switch(t.label){case 0:return[4,this.exists(o)];case 1:return(e=t.sent())?[4,this.get(o)]:[3,3];case 2:return n=t.sent(),[3,4];case 3:n=[],t.label=4;case 4:return r=n,e?[4,this.is(o,h.TYPES.list)]:[3,6];case 5:return i=t.sent(),[3,7];case 6:i=!1,t.label=7;case 7:if(s=i,e&&!s)throw new TypeError("the key is not a list");return r.unshift.apply(r,u),[4,this.set(o,r)];case 8:return t.sent(),[4,this._setType(o,h.TYPES.list)];case 9:return t.sent(),this.emit("lpush",o,u,r.length),[2,r.length]}})})},e.prototype.lpushx=function(i){for(var o=[],t=1;t<arguments.length;t++)o[t-1]=arguments[t];return a(this,void 0,void 0,function(){var e,r,n,s;return c(this,function(t){switch(t.label){case 0:return[4,this.exists(i)];case 1:if(!(e=t.sent()))throw new Error("no such key");return e?[4,this.is(i,h.TYPES.list)]:[3,3];case 2:return n=t.sent(),[3,4];case 3:n=!1,t.label=4;case 4:if(r=n,e&&!r)throw new TypeError("the key is not a list");return[4,this.get(i)];case 5:if(!(s=t.sent())||s.length<=0)throw new Error("the list is empty");return s.unshift.apply(s,o),[4,this.set(i,s)];case 6:return t.sent(),this.emit("lpushx",i,o,s.length),[2,s.length]}})})},e.prototype.rpush=function(o){for(var u=[],t=1;t<arguments.length;t++)u[t-1]=arguments[t];return a(this,void 0,void 0,function(){var e,r,n,s,i;return c(this,function(t){switch(t.label){case 0:return[4,this.exists(o)];case 1:return(e=t.sent())?[4,this.get(o)]:[3,3];case 2:return n=t.sent(),[3,4];case 3:n=[],t.label=4;case 4:return r=n,e?[4,this.is(o,h.TYPES.list)]:[3,6];case 5:return i=t.sent(),[3,7];case 6:i=!1,t.label=7;case 7:if(s=i,e&&!s)throw new TypeError("the key is not a list");return r.push.apply(r,u),[4,this.set(o,r)];case 8:return t.sent(),[4,this._setType(o,h.TYPES.list)];case 9:return t.sent(),this.emit("lpush",o,u,r.length),[2,r.length]}})})},e.prototype.rpushx=function(i){for(var o=[],t=1;t<arguments.length;t++)o[t-1]=arguments[t];return a(this,void 0,void 0,function(){var e,r,n,s;return c(this,function(t){switch(t.label){case 0:return[4,this.exists(i)];case 1:if(!(e=t.sent()))throw new Error("no such key");return e?[4,this.is(i,h.TYPES.list)]:[3,3];case 2:return n=t.sent(),[3,4];case 3:n=!1,t.label=4;case 4:if(r=n,e&&!r)throw new TypeError("the key is not a list");return[4,this.get(i)];case 5:if(!(s=t.sent())||s.length<=0)throw new Error("the list is empty");return s.push.apply(s,o),[4,this.set(i,s)];case 6:return t.sent(),this.emit("lpushx",i,o,s.length),[2,s.length]}})})},e.prototype.lpop=function(n){return a(this,void 0,void 0,function(){var e,r;return c(this,function(t){switch(t.label){case 0:return[4,this.exists(n)];case 1:return t.sent()?[4,this.is(n,h.TYPES.list)]:[2,null];case 2:if(!t.sent())throw new TypeError("the key is not a list");return[4,this.get(n)];case 3:return e=t.sent(),r=e.shift(),[4,this.set(n,e)];case 4:return t.sent(),this.emit("lpop",n,r),[2,r]}})})},e.prototype.rpop=function(n){return a(this,void 0,void 0,function(){var e,r;return c(this,function(t){switch(t.label){case 0:return[4,this.exists(n)];case 1:return t.sent()?[4,this.is(n,h.TYPES.list)]:[2,null];case 2:if(!t.sent())throw new TypeError("the key is not a list");return[4,this.get(n)];case 3:return e=t.sent(),r=e.pop(),[4,this.set(n,e)];case 4:return t.sent(),this.emit("rpop",n,r),[2,r]}})})},e.prototype.llen=function(e){return a(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,this.exists(e)];case 1:return t.sent()?[4,this.is(e,h.TYPES.list)]:[2,0];case 2:if(!t.sent())throw new TypeError("the key is not a list");return[4,this.get(e)];case 3:return[2,t.sent().length]}})})},e.prototype.lrange=function(r,n,s){return a(this,void 0,void 0,function(){var e;return c(this,function(t){switch(t.label){case 0:return[4,this.exists(r)];case 1:return t.sent()?[4,this.is(r,h.TYPES.list)]:[2,[]];case 2:if(!t.sent())throw new TypeError("the key is not a list");return[4,this.get(r)];case 3:return e=t.sent(),s<0&&(s=e.length+s),[2,e.slice(n,s+1)]}})})},e.prototype.lrem=function(s,i,o){return a(this,void 0,void 0,function(){var e,r,n;return c(this,function(t){switch(t.label){case 0:return[4,this.exists(s)];case 1:return t.sent()?[4,this.is(s,h.TYPES.list)]:[2,0];case 2:if(!t.sent())throw new TypeError("the key is not a list");return e=0,[4,this.get(s)];case 3:switch(r=t.sent(),!0){case 0<i:for(n=0;n<r.length&&e<i;n++)r[n]===o&&(r.splice(n,1)[0],e++);break;case i<0:for(n=r.length-1;0<=n&&e<-i;n--)r[n]===o&&(r.splice(n,1)[0],e++);break;case 0==i:for(n=r.length-1;0<=n;n--)r[n]===o&&(r.splice(n,1)[0],e++)}return[4,this.set(s,r)];case 4:return t.sent(),this.emit("lrem",s,i,o,e),[2,e]}})})},e.prototype.lset=function(r,n,s){return a(this,void 0,void 0,function(){var e;return c(this,function(t){switch(t.label){case 0:return[4,this.exists(r)];case 1:if(!t.sent())throw new Error("no such key");return[4,this.is(r,h.TYPES.list)];case 2:if(!t.sent())throw new TypeError("the key is not a list");return[4,this.get(r)];case 3:if(e=t.sent(),n<0&&0<e.length&&(n=e.length+n),!e[n]||!e.length)throw new Error("Illegal index");return e.length==n?e.push(s):e[n]=s,[4,this.set(r,e)];case 4:return t.sent(),this.emit("lset",r,n,s,e.length),[2,!0]}})})},e.prototype.ltrim=function(n,s,i){return a(this,void 0,void 0,function(){var e,r;return c(this,function(t){switch(t.label){case 0:return[4,this.exists(n)];case 1:if(!t.sent())throw new Error("no such key");return[4,this.is(n,h.TYPES.list)];case 2:if(!t.sent())throw new TypeError("the key is not a list");return[4,this.get(n)];case 3:return e=t.sent(),s<0&&(s=e.length+s),i<0&&(i=e.length+i),r=e.slice(s,i+1),[4,this.set(n,r)];case 4:return t.sent(),this.emit("ltrim",n,s,i,r.length),[2,r]}})})},e.prototype.lindex=function(r,n){return a(this,void 0,void 0,function(){var e;return c(this,function(t){switch(t.label){case 0:return[4,this.exists(r)];case 1:if(!t.sent())throw new Error("no such key");return[4,this.is(r,h.TYPES.list)];case 2:if(!t.sent())throw new TypeError("the key is not a list");return[4,this.get(r)];case 3:if(e=t.sent(),n>e.length-1)throw new Error("out of bound");return[2,e[n]]}})})},e.prototype.linsertBefore=function(n,s,i){return a(this,void 0,void 0,function(){var e,r;return c(this,function(t){switch(t.label){case 0:return[4,this.exists(n)];case 1:if(!t.sent())throw new Error("no such key");return[4,this.is(n,h.TYPES.list)];case 2:if(!t.sent())throw new TypeError("the key is not a list");return[4,this.get(n)];case 3:return e=t.sent(),(r=e.indexOf(s))<0?[2,-1]:(e.splice(r,0,i),[4,this.set(n,e)]);case 4:return t.sent(),this.emit("linsertBefore",n,s,i,e.length),[2,e.length]}})})},e.prototype.linsertAfter=function(n,s,i){return a(this,void 0,void 0,function(){var e,r;return c(this,function(t){switch(t.label){case 0:return[4,this.exists(n)];case 1:if(!t.sent())throw new Error("no such key");return[4,this.is(n,h.TYPES.list)];case 2:if(!t.sent())throw new TypeError("the key is not a list");return[4,this.get(n)];case 3:return e=t.sent(),(r=e.indexOf(s))<0?[2,-1]:(e.splice(r+1,0,i),[4,this.set(n,e)]);case 4:return t.sent(),this.emit("linsertAfter",n,s,i,e.length),[2,e.length]}})})},e.prototype.rpoplpush=function(n,s){return a(this,void 0,void 0,function(){var e,r;return c(this,function(t){switch(t.label){case 0:return[4,this.rpop(n)];case 1:return e=t.sent(),[4,this.lpush(s,e)];case 2:return r=t.sent(),this.emit("rpoplpush",n,s,e,r),[2,r]}})})},e.prototype.lpoprpush=function(n,s){return a(this,void 0,void 0,function(){var e,r;return c(this,function(t){switch(t.label){case 0:return[4,this.lpop(n)];case 1:return e=t.sent(),[4,this.rpush(s,e)];case 2:return r=t.sent(),this.emit("lpoprpush",n,s,e,r),[2,r]}})})},e}(h.Base);e.default=i},function(t,e,r){"use strict";var n,s=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),u=this&&this.__awaiter||function(i,o,u,a){return new(u||(u=Promise))(function(t,e){function r(t){try{s(a.next(t))}catch(t){e(t)}}function n(t){try{s(a.throw(t))}catch(t){e(t)}}function s(e){e.done?t(e.value):new u(function(t){t(e.value)}).then(r,n)}s((a=a.apply(i,o||[])).next())})},l=this&&this.__generator||function(r,n){var s,i,o,t,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(s)throw new TypeError("Generator is already executing.");for(;u;)try{if(s=1,i&&(o=2&e[0]?i.return:e[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,e[1])).done)return o;switch(i=0,o&&(e=[2&e[0],o.value]),e[0]){case 0:case 1:o=e;break;case 4:return u.label++,{value:e[1],done:!1};case 5:u.label++,i=e[1],e=[0];continue;case 7:e=u.ops.pop(),u.trys.pop();continue;default:if(!(o=0<(o=u.trys).length&&o[o.length-1])&&(6===e[0]||2===e[0])){u=0;continue}if(3===e[0]&&(!o||e[1]>o[0]&&e[1]<o[3])){u.label=e[1];break}if(6===e[0]&&u.label<o[1]){u.label=o[1],o=e;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(e);break}o[2]&&u.ops.pop(),u.trys.pop();continue}e=n.call(r,u)}catch(t){e=[6,t],i=0}finally{s=o=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};Object.defineProperty(e,"__esModule",{value:!0});var p=r(0),d=r(8),i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.prototype.sadd=function(h){for(var f=[],t=1;t<arguments.length;t++)f[t-1]=arguments[t];return u(this,void 0,void 0,function(){var e,r,n,s,i,o,u,a,c;return l(this,function(t){switch(t.label){case 0:return[4,this.exists(h)];case 1:return(e=t.sent())?[4,this.is(h,p.TYPES.set)]:[3,3];case 2:return n=t.sent(),[3,4];case 3:n=!1,t.label=4;case 4:if(r=n,e&&!r)throw new TypeError("the key is not a set");return e?[4,this.get(h)]:[3,6];case 5:return i=t.sent(),[3,7];case 6:i=[],t.label=7;case 7:for(s=i,u=o=0,a=d.arrayUnique(f);u<a.length;u++)c=a[u],s.indexOf(c)<0&&(s.push(c),o++);return[4,this.set(h,s)];case 8:return t.sent(),[4,this._setType(h,p.TYPES.set)];case 9:return t.sent(),this.emit("sadd",h,s.length),[2,o]}})})},e.prototype.srem=function(h){for(var f=[],t=1;t<arguments.length;t++)f[t-1]=arguments[t];return u(this,void 0,void 0,function(){var e,r,n,s,i,o,u,a,c;return l(this,function(t){switch(t.label){case 0:return[4,this.exists(h)];case 1:if(!(e=t.sent()))throw new Error("no such key");return e?[4,this.is(h,p.TYPES.set)]:[3,3];case 2:return n=t.sent(),[3,4];case 3:n=!1,t.label=4;case 4:if(r=n,e&&!r)throw new TypeError("the key is not a set");return s=0,[4,this.get(h)];case 5:for(i=t.sent(),o=0,u=d.arrayUnique(f);o<u.length;o++)a=u[o],0<=(c=i.indexOf(a))&&(i.splice(c,1),s++);return[4,this.set(h,i)];case 6:return t.sent(),this.emit("srem",h,f,i.length),[2,s]}})})},e.prototype.smembers=function(s){return u(this,void 0,void 0,function(){var e,r,n;return l(this,function(t){switch(t.label){case 0:return[4,this.exists(s)];case 1:if(!(e=t.sent()))throw new Error("no such key");return e?[4,this.is(s,p.TYPES.set)]:[3,3];case 2:return n=t.sent(),[3,4];case 3:n=!1,t.label=4;case 4:if(r=n,e&&!r)throw new TypeError("the key is not a set");return[4,this.get(s)];case 5:return[2,t.sent()]}})})},e.prototype.sismember=function(s,i){return u(this,void 0,void 0,function(){var e,r,n;return l(this,function(t){switch(t.label){case 0:return[4,this.exists(s)];case 1:if(!(e=t.sent()))throw new Error("no such key");return e?[4,this.is(s,p.TYPES.set)]:[3,3];case 2:return n=t.sent(),[3,4];case 3:n=!1,t.label=4;case 4:if(r=n,e&&!r)throw new TypeError("the key is not a set");return[4,this.get(s)];case 5:return[2,0<=t.sent().indexOf(i)]}})})},e.prototype.scard=function(e){return u(this,void 0,void 0,function(){return l(this,function(t){switch(t.label){case 0:return[4,this.smembers(e)];case 1:return[2,t.sent().length]}})})},e.prototype.smove=function(s,i,o){return u(this,void 0,void 0,function(){var e,r,n;return l(this,function(t){switch(t.label){case 0:return[4,this.exists(s)];case 1:if(!(e=t.sent()))throw new Error("no such key");return e?[4,this.is(s,p.TYPES.set)]:[3,3];case 2:return n=t.sent(),[3,4];case 3:n=!1,t.label=4;case 4:if(r=n,e&&!r)throw new TypeError("the key is not a set");return[4,this.sismember(s,o)];case 5:if(!t.sent())throw new Error("no such member");return[4,this.sadd(i,o)];case 6:return t.sent(),this.emit("smove",s,i,o),[2,1]}})})},e.prototype.srandmember=function(o){return u(this,void 0,void 0,function(){var e,r,n,s,i;return l(this,function(t){switch(t.label){case 0:return[4,this.exists(o)];case 1:return(e=t.sent())?e?[4,this.is(o,p.TYPES.set)]:[3,3]:[2,null];case 2:return n=t.sent(),[3,4];case 3:n=!1,t.label=4;case 4:if(r=n,e&&!r)throw new TypeError("the key is not a set");return[4,this.smembers(o)];case 5:return s=t.sent(),i=Math.floor(Math.random()*s)||0,[2,s[i]]}})})},e.prototype.spop=function(i){return u(this,void 0,void 0,function(){var e,r,n,s;return l(this,function(t){switch(t.label){case 0:return[4,this.exists(i)];case 1:return(e=t.sent())?e?[4,this.is(i,p.TYPES.set)]:[3,3]:[2,null];case 2:return n=t.sent(),[3,4];case 3:n=!1,t.label=4;case 4:if(r=n,e&&!r)throw new TypeError("the key is not a set");return[4,this.srandmember(i)];case 5:return s=t.sent(),[4,this.srem(i,s)];case 6:return t.sent(),this.emit("spop",i,s),[2,s]}})})},e.prototype.sunion=function(){for(var o=[],t=0;t<arguments.length;t++)o[t]=arguments[t];return u(this,void 0,void 0,function(){var e,r,n,s,i;return l(this,function(t){switch(t.label){case 0:e=[],r=0,n=o,t.label=1;case 1:if(!(r<n.length))return[3,6];s=n[r],t.label=2;case 2:return t.trys.push([2,4,,5]),[4,this.smembers(s)];case 3:return i=t.sent(),e.push.apply(e,i),[3,5];case 4:return t.sent(),[3,5];case 5:return r++,[3,1];case 6:return[2,d.arrayUnique(e)]}})})},e.prototype.sunionstore=function(n){for(var s=[],t=1;t<arguments.length;t++)s[t-1]=arguments[t];return u(this,void 0,void 0,function(){var e,r;return l(this,function(t){switch(t.label){case 0:return[4,this.sunion.apply(this,s)];case 1:return e=t.sent(),[4,this.sadd.apply(this,[n].concat(e))];case 2:return r=t.sent(),this.emit("sunionstore",n,s,r,e),[2,r]}})})},e.prototype.sinter=function(){for(var o=[],t=0;t<arguments.length;t++)o[t]=arguments[t];return u(this,void 0,void 0,function(){var e,r,n,s,i;return l(this,function(t){switch(t.label){case 0:e=[],r=0,n=o,t.label=1;case 1:if(!(r<n.length))return[3,6];s=n[r],t.label=2;case 2:return t.trys.push([2,4,,5]),[4,this.smembers(s)];case 3:return i=t.sent(),e.push(i),[3,5];case 4:return t.sent(),[3,5];case 5:return r++,[3,1];case 6:return[2,e.reduce(function(t,e){return d.arrayInter.apply(void 0,[t].concat(e))})]}})})},e.prototype.sinterstore=function(n){for(var s=[],t=1;t<arguments.length;t++)s[t-1]=arguments[t];return u(this,void 0,void 0,function(){var e,r;return l(this,function(t){switch(t.label){case 0:return[4,this.sinter.apply(this,s)];case 1:return e=t.sent(),[4,this.sadd.apply(this,[n].concat(e))];case 2:return r=t.sent(),this.emit("sinterstore",n,s,r,e),[2,r]}})})},e.prototype.sdiff=function(){for(var o=[],t=0;t<arguments.length;t++)o[t]=arguments[t];return u(this,void 0,void 0,function(){var e,r,n,s,i;return l(this,function(t){switch(t.label){case 0:e=[],r=0,n=o,t.label=1;case 1:if(!(r<n.length))return[3,6];s=n[r],t.label=2;case 2:return t.trys.push([2,4,,5]),[4,this.smembers(s)];case 3:return i=t.sent(),e.push(i),[3,5];case 4:return t.sent(),[3,5];case 5:return r++,[3,1];case 6:return[2,e.reduce(function(t,e){return d.arrayDiff.apply(void 0,[t].concat(e))})]}})})},e.prototype.sdiffstore=function(n){for(var s=[],t=1;t<arguments.length;t++)s[t-1]=arguments[t];return u(this,void 0,void 0,function(){var e,r;return l(this,function(t){switch(t.label){case 0:return[4,this.sdiff.apply(this,s)];case 1:return e=t.sent(),[4,this.sadd.apply(this,[n].concat(e))];case 2:return r=t.sent(),this.emit("sdiffstore",n,s,r,e),[2,r]}})})},e}(p.Base);e.default=i},function(t,e,r){"use strict";function i(t){return t===Object(t)}function o(t){for(var e={},r=[],n=0,s=t.length;n<s;++n)e.hasOwnProperty(t[n])&&!i(t[n])||(r.push(t[n]),e[t[n]]=1);return r}function s(t){for(var s=[],e=1;e<arguments.length;e++)s[e-1]=arguments[e];return o(t).filter(function(t){for(var e=!0,r=0,n=s;r<n.length;r++){n[r].indexOf(t)<0&&(e=!1)}return e})}Object.defineProperty(e,"__esModule",{value:!0}),e.isObject=i,e.arrayUnique=o,e.arrayInter=s,e.arrayDiff=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var n=s.apply(void 0,[t].concat(e));return o(t.concat.apply(t,e)).filter(function(t){return n.indexOf(t)<0})}},function(t,e,r){"use strict";var n,s=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),d=this&&this.__awaiter||function(i,o,u,a){return new(u||(u=Promise))(function(t,e){function r(t){try{s(a.next(t))}catch(t){e(t)}}function n(t){try{s(a.throw(t))}catch(t){e(t)}}function s(e){e.done?t(e.value):new u(function(t){t(e.value)}).then(r,n)}s((a=a.apply(i,o||[])).next())})},y=this&&this.__generator||function(r,n){var s,i,o,t,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(s)throw new TypeError("Generator is already executing.");for(;u;)try{if(s=1,i&&(o=2&e[0]?i.return:e[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,e[1])).done)return o;switch(i=0,o&&(e=[2&e[0],o.value]),e[0]){case 0:case 1:o=e;break;case 4:return u.label++,{value:e[1],done:!1};case 5:u.label++,i=e[1],e=[0];continue;case 7:e=u.ops.pop(),u.trys.pop();continue;default:if(!(o=0<(o=u.trys).length&&o[o.length-1])&&(6===e[0]||2===e[0])){u=0;continue}if(3===e[0]&&(!o||e[1]>o[0]&&e[1]<o[3])){u.label=e[1];break}if(6===e[0]&&u.label<o[1]){u.label=o[1],o=e;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(e);break}o[2]&&u.ops.pop(),u.trys.pop();continue}e=n.call(r,u)}catch(t){e=[6,t],i=0}finally{s=o=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};Object.defineProperty(e,"__esModule",{value:!0});var v=r(0),i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.prototype.zadd=function(h,f,l){return d(this,void 0,void 0,function(){var e,r,n,s,i,o,u,a,c;return y(this,function(t){switch(t.label){case 0:return[4,this.exists(h)];case 1:return(e=t.sent())?[4,this.is(h,v.TYPES.zset)]:[3,3];case 2:return n=t.sent(),[3,4];case 3:n=!1,t.label=4;case 4:if(r=n,e&&!r)throw new TypeError("the key is not a sorted set");return e?[4,this.get(h)]:[3,6];case 5:return a=t.sent(),[3,7];case 6:a={ms:[],hsm:{},shm:{}},t.label=7;case 7:return i=(s=a).ms,o=s.hsm,u=s.shm,0<=i.indexOf(l)?[2,0]:(c=i.length,i.push(l),o[c]=f,Array.isArray(u[f])||(u[f]=[]),u[f].push(c),[4,this.set(h,{ms:i,shm:u,hsm:o})]);case 8:return t.sent(),[4,this._setType(h,v.TYPES.zset)];case 9:return t.sent(),this.emit("zadd",h,f,l,i.length),[2,1]}})})},e.prototype.zcard=function(s){return d(this,void 0,void 0,function(){var e,r,n;return y(this,function(t){switch(t.label){case 0:return[4,this.exists(s)];case 1:if(!(e=t.sent()))throw new Error("no such key");return e?[4,this.is(s,v.TYPES.zset)]:[3,3];case 2:return n=t.sent(),[3,4];case 3:n=!1,t.label=4;case 4:if(r=n,e&&!r)throw new TypeError("the key is not a sorted set");return[4,this.get(s)];case 5:return[2,t.sent().ms.length]}})})},e.prototype.zcount=function(i,o,u){return d(this,void 0,void 0,function(){var e,r,n,s;return y(this,function(t){switch(t.label){case 0:return[4,this.exists(i)];case 1:if(!(e=t.sent()))throw new Error("no such key");return e?[4,this.is(i,v.TYPES.zset)]:[3,3];case 2:return n=t.sent(),[3,4];case 3:n=!1,t.label=4;case 4:if(r=n,e&&!r)throw new TypeError("the key is not a sorted set");return[4,this.get(i)];case 5:return s=t.sent(),[2,Object.keys(s.shm).map(function(t){return parseFloat(t)}).filter(function(t){return o<=t&&t<=u}).map(function(t){return s.shm[t]}).reduce(function(t,e){return t.concat(e)}).length]}})})},e.prototype.zrem=function(l){for(var p=[],t=1;t<arguments.length;t++)p[t-1]=arguments[t];return d(this,void 0,void 0,function(){var e,r,n,s,i,o,u,a,c,h,f;return y(this,function(t){switch(t.label){case 0:return[4,this.exists(l)];case 1:if(!(e=t.sent()))throw new Error("no such key");return e?[4,this.is(l,v.TYPES.zset)]:[3,3];case 2:return n=t.sent(),[3,4];case 3:n=!1,t.label=4;case 4:if(r=n,e&&!r)throw new TypeError("the key is not a sorted set");return[4,this.get(l)];case 5:for(s=t.sent(),o=i=0,u=p;o<u.length;o++)a=u[o],0<=(c=s.ms.indexOf(a))&&(s.ms.splice(c,1),h=s.hsm[c],delete s.hsm[c],0<=(f=s.shm[h].indexOf(c))&&s.shm[h].splice(f,1),i++);return[4,this.set(l,s)];case 6:return t.sent(),[4,this._setType(l,v.TYPES.zset)];case 7:return t.sent(),this.emit("zrem",l,p,i),[2,i]}})})},e.prototype.zscore=function(o,u){return d(this,void 0,void 0,function(){var e,r,n,s,i;return y(this,function(t){switch(t.label){case 0:return[4,this.exists(o)];case 1:if(!(e=t.sent()))throw new Error("no such key");return e?[4,this.is(o,v.TYPES.zset)]:[3,3];case 2:return n=t.sent(),[3,4];case 3:n=!1,t.label=4;case 4:if(r=n,e&&!r)throw new TypeError("the key is not a sorted set");return[4,this.get(o)];case 5:if(s=t.sent(),(i=s.ms.indexOf(u))<0)throw new Error("This member does not be in the set");return[2,s.hsm[i]]}})})},e.prototype.zrange=function(o,u,a){return d(this,void 0,void 0,function(){var e,r,n,s,i;return y(this,function(t){switch(t.label){case 0:return[4,this.exists(o)];case 1:if(!(e=t.sent()))throw new Error("no such key");return e?[4,this.is(o,v.TYPES.zset)]:[3,3];case 2:return n=t.sent(),[3,4];case 3:n=!1,t.label=4;case 4:if(r=n,e&&!r)throw new TypeError("the key is not a sorted set");return[4,this.get(o)];case 5:return s=t.sent(),i=Object.keys(s.shm).map(function(t){return parseFloat(t)}).sort().filter(function(t){return u<=t&&t<=a}).map(function(t){return s.shm[t]}),[2,i.map(function(t){return t.map(function(t){return s.ms[t]})}).reduce(function(t,e){return t.concat(e)})]}})})},e.prototype.zrevrange=function(o,u,a){return d(this,void 0,void 0,function(){var e,r,n,s,i;return y(this,function(t){switch(t.label){case 0:return[4,this.exists(o)];case 1:if(!(e=t.sent()))throw new Error("no such key");return e?[4,this.is(o,v.TYPES.zset)]:[3,3];case 2:return n=t.sent(),[3,4];case 3:n=!1,t.label=4;case 4:if(r=n,e&&!r)throw new TypeError("the key is not a sorted set");return[4,this.get(o)];case 5:return s=t.sent(),i=Object.keys(s.shm).map(function(t){return parseFloat(t)}).sort(function(t,e){return e-t}).filter(function(t){return u<=t&&t<=a}).map(function(t){return s.shm[t]}),[2,i.map(function(t){return t.map(function(t){return s.ms[t]})}).reduce(function(t,e){return t.concat(e)})]}})})},e.prototype.zincrby=function(a,c,h){return d(this,void 0,void 0,function(){var e,r,n,s,i,o,u;return y(this,function(t){switch(t.label){case 0:return[4,this.exists(a)];case 1:return(e=t.sent())?[3,3]:[4,this.zadd(a,0,h)];case 2:t.sent(),t.label=3;case 3:return e?[4,this.is(a,v.TYPES.zset)]:[3,5];case 4:return n=t.sent(),[3,6];case 5:n=!1,t.label=6;case 6:if(r=n,e&&!r)throw new TypeError("the key is not a sorted set");return[4,this.get(a)];case 7:return s=t.sent(),i=s.ms.indexOf(h),o=s.hsm[i],u=s.shm[o].indexOf(i),s.shm[o].splice(u,1),o+=c,s.hsm[i]=o,Array.isArray(s.shm[o])||(s.shm[o]=[]),s.shm[o].push(i),[4,this.set(a,s)];case 8:return t.sent(),[4,this._setType(a,v.TYPES.zset)];case 9:return t.sent(),this.emit("zincrby",a,c,h,o),[2,o]}})})},e.prototype.zdecrby=function(a,c,h){return d(this,void 0,void 0,function(){var e,r,n,s,i,o,u;return y(this,function(t){switch(t.label){case 0:return[4,this.exists(a)];case 1:if(e=t.sent())throw new Error("no such key");return e?[4,this.is(a,v.TYPES.zset)]:[3,3];case 2:return n=t.sent(),[3,4];case 3:n=!1,t.label=4;case 4:if(r=n,e&&!r)throw new TypeError("the key is not a sorted set");return[4,this.get(a)];case 5:return s=t.sent(),i=s.ms.indexOf(h),o=s.hsm[i],u=s.shm[o].indexOf(i),s.shm[o].splice(u,1),o-=c,s.hsm[i]=o,Array.isArray(s.shm[o])||(s.shm[o]=[]),s.shm[o].push(i),[4,this.set(a,s)];case 6:return t.sent(),[4,this._setType(a,v.TYPES.zset)];case 7:return t.sent(),this.emit("zdecrby",a,c,h,o),[2,o]}})})},e.prototype.zrank=function(u,a){return d(this,void 0,void 0,function(){var e,r,n,s,i,o;return y(this,function(t){switch(t.label){case 0:return[4,this.exists(u)];case 1:if(e=t.sent())throw new Error("no such key");return e?[4,this.is(u,v.TYPES.zset)]:[3,3];case 2:return n=t.sent(),[3,4];case 3:n=!1,t.label=4;case 4:if(r=n,e&&!r)throw new TypeError("the key is not a sorted set");return[4,this.get(u)];case 5:return s=t.sent(),i=Object.keys(s.shm).map(function(t){return parseFloat(t)}).sort(),o=parseFloat(s.hsm[s.ms.indexOf(a)]),[2,i.indexOf(o)+1]}})})},e.prototype.zrevrank=function(u,a){return d(this,void 0,void 0,function(){var e,r,n,s,i,o;return y(this,function(t){switch(t.label){case 0:return[4,this.exists(u)];case 1:if(e=t.sent())throw new Error("no such key");return e?[4,this.is(u,v.TYPES.zset)]:[3,3];case 2:return n=t.sent(),[3,4];case 3:n=!1,t.label=4;case 4:if(r=n,e&&!r)throw new TypeError("the key is not a sorted set");return[4,this.get(u)];case 5:return s=t.sent(),i=Object.keys(s.shm).map(function(t){return parseFloat(t)}).sort(),o=parseFloat(s.hsm[s.ms.indexOf(a)]),[2,i.reverse().indexOf(o)+1]}})})},e}(v.Base);e.default=i},function(t,e,r){"use strict";var n=this&&this.__awaiter||function(i,o,u,a){return new(u||(u=Promise))(function(t,e){function r(t){try{s(a.next(t))}catch(t){e(t)}}function n(t){try{s(a.throw(t))}catch(t){e(t)}}function s(e){e.done?t(e.value):new u(function(t){t(e.value)}).then(r,n)}s((a=a.apply(i,o||[])).next())})},a=this&&this.__generator||function(r,n){var s,i,o,t,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(s)throw new TypeError("Generator is already executing.");for(;u;)try{if(s=1,i&&(o=2&e[0]?i.return:e[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,e[1])).done)return o;switch(i=0,o&&(e=[2&e[0],o.value]),e[0]){case 0:case 1:o=e;break;case 4:return u.label++,{value:e[1],done:!1};case 5:u.label++,i=e[1],e=[0];continue;case 7:e=u.ops.pop(),u.trys.pop();continue;default:if(!(o=0<(o=u.trys).length&&o[o.length-1])&&(6===e[0]||2===e[0])){u=0;continue}if(3===e[0]&&(!o||e[1]>o[0]&&e[1]<o[3])){u.label=e[1];break}if(6===e[0]&&u.label<o[1]){u.label=o[1],o=e;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(e);break}o[2]&&u.ops.pop(),u.trys.pop();continue}e=n.call(r,u)}catch(t){e=[6,t],i=0}finally{s=o=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t){this.queue=[],this.min=t}return t.prototype.exec=function(){return n(this,void 0,void 0,function(){var e,r,n,s,i,o,u;return a(this,function(t){switch(t.label){case 0:e=[],r=0,n=this.queue,t.label=1;case 1:return r<n.length?(s=n[r],i=s.task,o=s.args,[4,this.min[i].apply(this.min,o)]):[3,4];case 2:u=t.sent(),e.push(u),t.label=3;case 3:return r++,[3,1];case 4:return[2,e]}})})},t.prototype.exists=function(t){return this.queue.push({task:"exists",args:[t]}),this},t.prototype.is=function(t,e){return this.queue.push({task:"is",args:[t,e]}),this},t.prototype.renamenx=function(t,e){return this.queue.push({task:"renamenx",args:[t,e]}),this},t.prototype.rename=function(t,e){return this.queue.push({task:"rename",args:[t,e]}),this},t.prototype.set=function(t,e){return this.queue.push({task:"set",args:[t,e]}),this},t.prototype.setnx=function(t,e){return this.queue.push({task:"setnx",args:[t,e]}),this},t.prototype.setex=function(t,e,r){return this.queue.push({task:"setex",args:[t,e,r]}),this},t.prototype.psetex=function(t,e,r){return this.queue.push({task:"psetex",args:[t,e,r]}),this},t.prototype.mset=function(t){return this.queue.push({task:"mset",args:[t]}),this},t.prototype.append=function(t,e){return this.queue.push({task:"append",args:[t,e]}),this},t.prototype.get=function(t){return this.queue.push({task:"get",args:[t]}),this},t.prototype.getrange=function(t,e,r){return this.queue.push({task:"getrange",args:[t,e,r]}),this},t.prototype.mget=function(t){return this.queue.push({task:"mget",args:[t]}),this},t.prototype.getset=function(t,e){return this.queue.push({task:"getset",args:[t,e]}),this},t.prototype.strlen=function(t){return this.queue.push({task:"strlen",args:[t]}),this},t.prototype.incr=function(t){return this.queue.push({task:"incr",args:[t]}),this},t.prototype.del=function(t){return this.queue.push({task:"del",args:[t]}),this},t.prototype.keys=function(t){return void 0===t&&(t="*"),this.queue.push({task:"keys",args:[t]}),this},t.prototype.randomKey=function(){return this.queue.push({task:"randomKey",args:[]}),this},t.prototype.type=function(t){return this.queue.push({task:"type",args:[t]}),this},t.prototype.empty=function(){return this.queue.push({task:"empty",args:[]}),this},t.prototype.hset=function(t,e,r){return this.queue.push({task:"hset",args:[t,e,r]}),this},t.prototype.hsetnx=function(t,e,r){return this.queue.push({task:"hsetnx",args:[t,e,r]}),this},t.prototype.hexists=function(t,e){return this.queue.push({task:"hexists",args:[t,e]}),this},t.prototype.hmset=function(t,e){return this.queue.push({task:"hmset",args:[t,e]}),this},t.prototype.hget=function(t,e){return this.queue.push({task:"hget",args:[t,e]}),this},t.prototype.hmget=function(t,e){return this.queue.push({task:"hmget",args:[t,e]}),this},t.prototype.hgetall=function(t){return this.queue.push({task:"hgetall",args:[t]}),this},t.prototype.hdel=function(t,e){return this.queue.push({task:"hdel",args:[t,e]}),this},t.prototype.hlen=function(t){return this.queue.push({task:"hlen",args:[t]}),this},t.prototype.hkeys=function(t){return this.queue.push({task:"hkeys",args:[t]}),this},t.prototype.hincr=function(t,e){return this.queue.push({task:"hincr",args:[t,e]}),this},t.prototype.hincrby=function(t,e,r){return this.queue.push({task:"hincrby",args:[t,e,r]}),this},t.prototype.hincrbyfloat=function(t,e,r){return this.queue.push({task:"hincrbyfloat",args:[t,e,r]}),this},t.prototype.hdecr=function(t,e){return this.queue.push({task:"hdecr",args:[t,e]}),this},t.prototype.hdecrby=function(t,e,r){return this.queue.push({task:"hdecrby",args:[t,e,r]}),this},t.prototype.hdecrbyfloat=function(t,e,r){return this.queue.push({task:"hdecrby",args:[t,e,r]}),this},t.prototype.lpush=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];return this.queue.push({task:"lpush",args:[t].concat(e)}),this},t.prototype.lpushx=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];return this.queue.push({task:"lpushx",args:[t].concat(e)}),this},t.prototype.rpush=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];return this.queue.push({task:"rpush",args:[t].concat(e)}),this},t.prototype.rpushx=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];return this.queue.push({task:"rpushx",args:[t].concat(e)}),this},t.prototype.lpop=function(t){return this.queue.push({task:"lpop",args:[t]}),this},t.prototype.rpop=function(t){return this.queue.push({task:"rpop",args:[t]}),this},t.prototype.llen=function(t){return this.queue.push({task:"llen",args:[t]}),this},t.prototype.lrange=function(t,e,r){return this.queue.push({task:"lrange",args:[t,e,r]}),this},t.prototype.lrem=function(t,e,r){return this.queue.push({task:"lrem",args:[t,e,r]}),this},t.prototype.lset=function(t,e,r){return this.queue.push({task:"lset",args:[t,e,r]}),this},t.prototype.ltrim=function(t,e,r){return this.queue.push({task:"ltrim",args:[t,e,r]}),this},t.prototype.lindex=function(t,e){return this.queue.push({task:"lindex",args:[t,e]}),this},t.prototype.linsertBefore=function(t,e,r){return this.queue.push({task:"linsertBefore",args:[t,e,r]}),this},t.prototype.linsertAfter=function(t,e,r){return this.queue.push({task:"linsertAfter",args:[t,e,r]}),this},t.prototype.rpoplpush=function(t,e){return this.queue.push({task:"rpoplpush",args:[t,e]}),this},t.prototype.lpoprpush=function(t,e){return this.queue.push({task:"lpoprpush",args:[t,e]}),this},t.prototype.sadd=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];return this.queue.push({task:"sadd",args:[t].concat(e)}),this},t.prototype.srem=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];return this.queue.push({task:"srem",args:[t].concat(e)}),this},t.prototype.smembers=function(t){return this.queue.push({task:"smembers",args:[t]}),this},t.prototype.sismember=function(t,e){return this.queue.push({task:"sismember",args:[t,e]}),this},t.prototype.scard=function(t){return this.queue.push({task:"scard",args:[t]}),this},t.prototype.smove=function(t,e,r){return this.queue.push({task:"smove",args:[t,e,r]}),this},t.prototype.srandmember=function(t){return this.queue.push({task:"srandmember",args:[t]}),this},t.prototype.spop=function(t){return this.queue.push({task:"spop",args:[t]}),this},t.prototype.sunion=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.queue.push({task:"sunion",args:t}),this},t.prototype.sunionstore=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];return this.queue.push({task:"sunionstore",args:[t].concat(e)}),this},t.prototype.sinter=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.queue.push({task:"sinter",args:t}),this},t.prototype.sinterstore=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];return this.queue.push({task:"sinterstore",args:[t].concat(e)}),this},t.prototype.sdiff=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.queue.push({task:"sdiff",args:t}),this},t.prototype.sdiffstore=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];return this.queue.push({task:"sdiffstore",args:[t].concat(e)}),this},t.prototype.zadd=function(t,e,r){return this.queue.push({task:"zadd",args:[t,e,r]}),this},t.prototype.zcard=function(t){return this.queue.push({task:"zcard",args:[t]}),this},t.prototype.zcount=function(t,e,r){return this.queue.push({task:"zcount",args:[t,e,r]}),this},t.prototype.zrem=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];return this.queue.push({task:"zrem",args:[t].concat(e)}),this},t.prototype.zscore=function(t,e){return this.queue.push({task:"zscore",args:[t,e]}),this},t.prototype.zrange=function(t,e,r){return this.queue.push({task:"zrange",args:[t,e,r]}),this},t.prototype.zrevrange=function(t,e,r){return this.queue.push({task:"zrevrange",args:[t,e,r]}),this},t.prototype.zincrby=function(t,e,r){return this.queue.push({task:"zincrby",args:[t,e,r]}),this},t.prototype.zdecrby=function(t,e,r){return this.queue.push({task:"zdecrby",args:[t,e,r]}),this},t.prototype.zrank=function(t,e){return this.queue.push({task:"zrank",args:[t,e]}),this},t.prototype.zrevrank=function(t,e){return this.queue.push({task:"zrevrank",args:[t,e]}),this},t}();e.Multi=s}])});
//# sourceMappingURL=min.map